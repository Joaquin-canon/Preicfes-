{% extends "layout/layout_admin.html" %}

{% block title %}Observabilidad{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="/static/css/admin/observabilidad.css">
{% endblock %}

{% block content %}
<div class="observabilidad-container">

    <!-- =====================
         HEADER
    ====================== -->
    <div class="observabilidad-header">
        <h1>Panel de Observabilidad</h1>
        <span class="subtitle">
            Estado general del sistema y control de accesos (RBAC)
        </span>
    </div>

    <!-- =====================
         KPIs
    ====================== -->
    <section class="kpi-grid">

        <div class="kpi-card success">
            <span class="kpi-title">Uptime</span>
            <span class="kpi-value">{{ data.uptime }}</span>
            <span class="kpi-desc">√öltimos 30 d√≠as</span>
        </div>

        <div class="kpi-card warning">
            <span class="kpi-title">Errores</span>
            <span class="kpi-value">{{ data.errores }}</span>
            <span class="kpi-desc">Errores cr√≠ticos detectados</span>
        </div>

        <div class="kpi-card info">
            <span class="kpi-title">Latencia promedio</span>
            <span class="kpi-value">{{ data.latencia }}</span>
            <span class="kpi-desc">Tiempo de respuesta</span>
        </div>

        <div class="kpi-card neutral">
            <span class="kpi-title">Estado</span>
            <span class="kpi-value">{{ data.estado }}</span>
            <span class="kpi-desc">Salud del sistema</span>
        </div>

    </section>

    <!-- =====================
         EVENTOS RECIENTES
    ====================== -->
    <section class="panel">
        <h2>Eventos recientes</h2>

        <ul class="event-list">
            <li>
                <span class="event-time">Hace 5 min</span>
                <span class="event-ok">‚úî Servicio API respondi√≥ correctamente</span>
            </li>
            <li>
                <span class="event-time">Hace 32 min</span>
                <span class="event-warn">‚ö† Pico de latencia detectado</span>
            </li>
            <li>
                <span class="event-time">Hace 2 h</span>
                <span class="event-ok">‚úî Conexi√≥n a base de datos estable</span>
            </li>
            <li>
                <span class="event-time">Ayer</span>
                <span class="event-ok">‚úî Sistema reiniciado sin errores</span>
            </li>
        </ul>
    </section>

    <!-- =====================
         MATRIZ RBAC
    ====================== -->
    <section class="panel rbac-panel">
        <h2>Matriz de Control de Accesos (RBAC)</h2>
        <p class="panel-subtitle">
            Definici√≥n de permisos por rol dentro de la plataforma Pre-ICFES
        </p>

        <div class="rbac-table-wrapper">
            <table class="rbac-table">
                <thead>
                    <tr>
                        <th>M√≥dulo / Acci√≥n</th>
                        <th>Administrador</th>
                        <th>Coordinador</th>
                        <th>Docente</th>
                        <th>Estudiante</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Cat√°logo de contenidos</td>
                        <td class="allow">‚úî</td>
                        <td class="allow">‚úî</td>
                        <td class="read">üëÅ</td>
                        <td class="deny">‚úñ</td>
                    </tr>
                    <tr>
                        <td>Gesti√≥n de cuestionarios</td>
                        <td class="allow">‚úî</td>
                        <td class="allow">‚úî</td>
                        <td class="allow">‚úî</td>
                        <td class="deny">‚úñ</td>
                    </tr>
                    <tr>
                        <td>Versionado de formularios</td>
                        <td class="allow">‚úî</td>
                        <td class="allow">‚úî</td>
                        <td class="deny">‚úñ</td>
                        <td class="deny">‚úñ</td>
                    </tr>
                    <tr>
                        <td>Resultados y reportes</td>
                        <td class="allow">‚úî</td>
                        <td class="allow">‚úî</td>
                        <td class="read">üëÅ</td>
                        <td class="read">üëÅ</td>
                    </tr>
                    <tr>
                        <td>Configuraci√≥n del sistema</td>
                        <td class="allow">‚úî</td>
                        <td class="deny">‚úñ</td>
                        <td class="deny">‚úñ</td>
                        <td class="deny">‚úñ</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="rbac-legend">
            <span><strong>‚úî</strong> Acceso completo</span>
            <span><strong>üëÅ</strong> Solo lectura</span>
            <span><strong>‚úñ</strong> Sin acceso</span>
        </div>
    </section>

</div>
{% endblock %}
