{% extends "layout/layout_admin.html" %}

{% block title %}
Previsualización de pregunta
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-6">

    <!-- =========================
         HEADER
    ========================== -->
    <section class="bg-white rounded-xl shadow p-6">
        <h1 class="text-2xl font-bold text-gray-800">
            Previsualización de pregunta
        </h1>

        <p class="mt-1 text-sm text-gray-500">
            Área:
            <strong>{{ pregunta.area.nombre }}</strong>
            · Tipo:
            <strong>{{ pregunta.tipo_pregunta.nombre }}</strong>
            · Dificultad:
            <strong>{{ pregunta.dificultad }}</strong>
        </p>
    </section>

    <!-- =========================
         CONTEXTO (solo si existe)
    ========================== -->
    {% if pregunta.contexto %}
    <section class="bg-white rounded-xl shadow p-6">
        <div class="prose max-w-none">
            {{ pregunta.contexto | safe }}
        </div>
    </section>
    {% endif %}

    <!-- =========================
         IMAGEN (solo si existe)
    ========================== -->
    {% if pregunta.imagen_url %}
    <section class="bg-white rounded-xl shadow p-6 flex justify-center">
        <img
            src="{{ pregunta.imagen_url }}"
            alt="Imagen de la pregunta"
            class="max-w-full max-h-[400px] rounded border"
        >
    </section>
    {% endif %}

    <!-- =========================
         ENUNCIADO + OPCIONES
    ========================== -->
    <section class="bg-white rounded-xl shadow p-6">

        <p class="text-lg font-medium text-gray-800 mb-4">
            {{ pregunta.enunciado }}
        </p>

        <ul class="space-y-3">
            {% set letras = ['A','B','C','D','E','F'] %}

            {% for opcion in pregunta.opciones %}
                {% set idx = loop.index0 %}
                <li class="flex items-start gap-3 p-3 rounded border
                    {% if pregunta.respuesta_correcta == idx %}
                        border-green-500 bg-green-50
                    {% else %}
                        border-gray-200
                    {% endif %}
                ">
                    <span class="font-bold text-gray-700">
                        {{ letras[idx] }}.
                    </span>

                    <span class="text-gray-800">
                        {{ opcion }}
                    </span>

                    {% if pregunta.respuesta_correcta == idx %}
                        <span class="ml-auto text-green-600 font-semibold">
                            ✔ Correcta
                        </span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </section>

    <!-- =========================
         FOOTER
    ========================== -->
    <div class="flex justify-end">
        <a href="javascript:history.back()"
           class="px-4 py-2 border rounded hover:bg-gray-100">
            ← Volver al banco
        </a>
    </div>

</div>
{% endblock %}
